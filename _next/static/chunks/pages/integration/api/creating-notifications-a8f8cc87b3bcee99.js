(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{7758:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integration/api/creating-notifications",function(){return t(9321)}])},7845:function(e,n,t){"use strict";var a=t(5893);n.Z={github:"https://github.com/notifir",docsRepositoryBase:"https://github.com/notifir/docs",titleSuffix:" \u2013 Notifir",logo:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mr-2 font-extrabold hidden md:inline",children:"Notifir"}),(0,a.jsx)("span",{className:"text-gray-600 font-normal hidden md:inline",children:"In-app notifications made easy"})]}),head:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("meta",{name:"msapplication-TileColor",content:"#ffffff"}),(0,a.jsx)("meta",{name:"theme-color",content:"#ffffff"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,a.jsx)("meta",{httpEquiv:"Content-Language",content:"en"}),(0,a.jsx)("meta",{name:"description",content:"Notifir: In-app notifications made easy"}),(0,a.jsx)("meta",{name:"og:description",content:"Notifir: In-app notifications made easy"}),(0,a.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,a.jsx)("meta",{name:"twitter:image",content:"https://notifir.github.io/docs/og.png"}),(0,a.jsx)("meta",{name:"twitter:site:domain",content:"https://notifir.github.io/docs"}),(0,a.jsx)("meta",{name:"twitter:url",content:"https://notifir.github.io/docs"}),(0,a.jsx)("meta",{name:"og:title",content:"Notifir: In-app notifications made easy"}),(0,a.jsx)("meta",{name:"og:image",content:"https://notifir.github.io/docs/og.png"}),(0,a.jsx)("meta",{name:"apple-mobile-web-app-title",content:"Notifir"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-icon-180x180.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"192x192",href:"/android-icon-192x192.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"96x96",href:"/favicon-96x96.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,a.jsx)("meta",{name:"msapplication-TileImage",content:"/ms-icon-144x144.png"})]}),search:!0,prevLinks:!0,nextLinks:!0,footer:!0,footerEditLink:"Edit this page on GitHub",footerText:(0,a.jsxs)(a.Fragment,{children:["MIT ",(new Date).getFullYear()," \xa9 Notifir"]}),unstable_faviconGlyph:"\ud83d\udd14"}},9321:function(e,n,t){"use strict";t.r(n);t(7294);var a=t(3905),i=t(7829),r=t.n(i),o=t(3805),m=t(7845);function d(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var p=function(e){return(0,o.withSSG)(r()({filename:"creating-notifications.mdx",route:"/integration/api/creating-notifications",meta:{},pageMap:[{name:"advanced",children:[{name:"meta.json",meta:{}}],route:"/advanced"},{name:"deployment",route:"/deployment"},{name:"get-started",route:"/get-started"},{name:"index",route:"/"},{name:"integration",children:[{name:"api",children:[{name:"creating-notifications",route:"/integration/api/creating-notifications"},{name:"data-model",route:"/integration/api/data-model"},{name:"meta.json",meta:{"data-model":"Data Model","creating-notifications":"Creating Notifications"}}],route:"/integration/api"},{name:"authentication",route:"/integration/authentication"},{name:"component",children:[{name:"customization",route:"/integration/component/customization"},{name:"installation",route:"/integration/component/installation"},{name:"meta.json",meta:{installation:"Installation",customization:"Customization"}}],route:"/integration/component"},{name:"meta.json",meta:{authentication:"Authentication",api:"API",component:"Web Component"}}],route:"/integration"},{name:"meta.json",meta:{index:"Introduction","get-started":"Get Started",integration:"Integration",deployment:"Deployment",advanced:"Advanced"}}]},m.Z))(e)};function s(e){var n=e.components,t=d(e,["components"]);return(0,a.mdx)(p,Object.assign({components:n},t),(0,a.mdx)("h1",null,"Creating notifications"),(0,a.mdx)("p",null,"These section describes how you can create notifications. Notifir provides REST and GraphQL APIs. You can also use ",(0,a.mdx)("a",{href:"https://github.com/notifir/notifir-java",parentName:"p"},"Notifir Java Client"),". The new notifications appear in the notification inbox of the recipient in real-time."),(0,a.mdx)("hr",null),(0,a.mdx)("p",null,"All requests require following headers:"),(0,a.mdx)("table",null,(0,a.mdx)("thead",{parentName:"table"},(0,a.mdx)("tr",{parentName:"thead"},(0,a.mdx)("th",{parentName:"tr"},"Header\u2003\u2003\u2003"),(0,a.mdx)("th",{parentName:"tr"},"Description"))),(0,a.mdx)("tbody",{parentName:"table"},(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr"},"x-api-key"),(0,a.mdx)("td",{parentName:"tr"},"containing project's API key")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr"},"x-user-id"),(0,a.mdx)("td",{parentName:"tr"},"containing the id of the user performing the request")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr"},"x-user-hmac"),(0,a.mdx)("td",{parentName:"tr"},"(if hmac authentication is enabled) containing the computed hash for the user")))),(0,a.mdx)("h2",null,"REST API"),(0,a.mdx)("p",null,(0,a.mdx)("strong",{parentName:"p"},"POST")," ",(0,a.mdx)("inlineCode",{parentName:"p"},"/api/notifications")),(0,a.mdx)("p",null,"Example usage:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre"},'curl --request POST \\\n     --url https://t-notifications-api.herokuapp.com/api/notifications \\\n     --header \'Content-Type: application/json\' \\\n     --header \'x-api-key: [api_key]\' \\\n     --header \'x-user-id: [user_id]\' \\\n     --header \'x-user-hmac: [user_id_hmac]\' \\\n     --data \'\n       {\n         "type": "entry-created",\n         "recipients": ["beast~mailinator.com@marvel-x-men"],\n         "payload": {\n            "entry": "001",\n            "step": "New",\n            "folder": "Reports",\n            "user": "Henry McCoy"\n         },\n         "action_url": "https://notifir.github.io/widget"\n       }\'\n')),(0,a.mdx)("h5",null,"Body params"),(0,a.mdx)("table",null,(0,a.mdx)("thead",{parentName:"table"},(0,a.mdx)("tr",{parentName:"thead"},(0,a.mdx)("th",{parentName:"tr"},"Parameter"),(0,a.mdx)("th",{parentName:"tr"},"Description"),(0,a.mdx)("th",{parentName:"tr"},"Type"),(0,a.mdx)("th",{align:"center",parentName:"tr"},"Required"),(0,a.mdx)("th",{parentName:"tr"},"Notes"))),(0,a.mdx)("tbody",{parentName:"table"},(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr"},"type"),(0,a.mdx)("td",{parentName:"tr"},"type of the notification"),(0,a.mdx)("td",{parentName:"tr"},"String"),(0,a.mdx)("td",{align:"center",parentName:"tr"},"\u2705"),(0,a.mdx)("td",{parentName:"tr"},"Max length: 255")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr"},"recipients"),(0,a.mdx)("td",{parentName:"tr"},"list of user ids to send the notification to"),(0,a.mdx)("td",{parentName:"tr"},"Array"),(0,a.mdx)("td",{align:"center",parentName:"tr"},"\u2705"),(0,a.mdx)("td",{parentName:"tr"},"Min items: 1")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr"},"payload"),(0,a.mdx)("td",{parentName:"tr"},"custom map of data that is used to generate messages from templates"),(0,a.mdx)("td",{parentName:"tr"},"Object"),(0,a.mdx)("td",{align:"center",parentName:"tr"}),(0,a.mdx)("td",{parentName:"tr"})),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr"},"action_url"),(0,a.mdx)("td",{parentName:"tr"},"url to redirect the user to when they click the notification"),(0,a.mdx)("td",{parentName:"tr"},"String"),(0,a.mdx)("td",{align:"center",parentName:"tr"}),(0,a.mdx)("td",{parentName:"tr"})))),(0,a.mdx)("h5",null,"Responses"),(0,a.mdx)("p",null,(0,a.mdx)("strong",{parentName:"p"},"201")),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "notifications": [\n    {\n      "id": "6bf116d6-08f5-11ed-ad74-7b8c7a2131e1"\n    }\n  ]\n}\n')),(0,a.mdx)("p",null,(0,a.mdx)("strong",{parentName:"p"},"400")),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "error": "bad_request",\n  "message": "Field \'type\' is required and cannot be empty."\n}\n')),(0,a.mdx)("p",null,(0,a.mdx)("strong",{parentName:"p"},"401")),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "error": "unauthorized",\n  "message": "Missing required header \'x-user-hmac\'"\n}\n')),(0,a.mdx)("p",null,(0,a.mdx)("strong",{parentName:"p"},"403")),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "error": "forbidden",\n  "message": "User beast~mailinator.com@marvel-x-men doesn\'t have permission to create notifications"\n}\n')),(0,a.mdx)("p",null,(0,a.mdx)("strong",{parentName:"p"},"500")),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "error": "internal_server_error",\n  "message": "An error occurred while creating new notification: No data returned from the query."\n}\n')),(0,a.mdx)("h2",null,"GraphQL API"),(0,a.mdx)("p",null,(0,a.mdx)("strong",{parentName:"p"},"POST")," ",(0,a.mdx)("inlineCode",{parentName:"p"},"/api/graphql")),(0,a.mdx)("p",null,"Example usage:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre"},'curl --request POST \\\n     --url https://t-notifications-api.herokuapp.com/api/graphql \\\n     --header \'Content-Type: application/json\' \\\n     --header \'x-api-key: [api_key]\' \\\n     --header \'x-user-id: [user_id]\' \\\n     --header \'x-user-hmac: [user_id_hmac]\' \\\n     --data \'\n       {\n         "query": "mutation { createNotification(input: { notification: { type: \\"entry-created\\", userId: \\"beast~mailinator.com@marvel-x-men\\", projectId: \\"default\\", payload: \\"{\\\\\\"entry\\\\\\": \\\\\\"001\\\\\\", \\\\\\"step\\\\\\": \\\\\\"New\\\\\\", \\\\\\"folder\\\\\\": \\\\\\"Reports\\\\\\", \\\\\\"user\\\\\\": \\\\\\"Henry McCoy\\\\\\" }\\" } } ) { notification { id } } }"\n       }\'\n\n')),(0,a.mdx)("h5",null,"Responses"),(0,a.mdx)("p",null,(0,a.mdx)("strong",{parentName:"p"},"200")),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "data": {\n    "createNotification": {\n      "notification": {\n        "id": "71e4f80a-0909-11ed-9a68-e765b0b955a1"\n      }\n    }\n  }\n}\n')),(0,a.mdx)("p",null,(0,a.mdx)("strong",{parentName:"p"},"400")),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "errors": [\n    {\n      "locations": [\n        {\n          "column": 55,\n          "line": 1\n        }\n      ],\n      "message": "Field \\"NotificationInput.type\\" of required type \\"String!\\" was not provided."\n    }\n  ]\n}\n')),(0,a.mdx)("p",null,(0,a.mdx)("strong",{parentName:"p"},"500")),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "errors": [\n    {\n      "message": "Missing required header \'x-user-id\'"\n    }\n  ]\n}\n')),(0,a.mdx)("h2",null,"Java client"),(0,a.mdx)("h3",null,"Download"),(0,a.mdx)("p",null,"Get Notifir Java via Maven:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-xml",parentName:"pre"},"<dependency>\n  <groupId>io.github.notifir</groupId>\n  <artifactId>notifir</artifactId>\n  <version>0.5.6</version>\n</dependency>\n")),(0,a.mdx)("p",null,"or Gradle:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-gradle",parentName:"pre"},"implementation 'io.github.notifir:notifir:0.5.6'\n")),(0,a.mdx)("h3",null,"Usage"),(0,a.mdx)("h4",null,"Initialization"),(0,a.mdx)("p",null,"The implementation is based on the ",(0,a.mdx)("a",{href:"https://notifir.github.io/docs/",parentName:"p"},"Notifir API"),"."),(0,a.mdx)("p",null,"Create a ",(0,a.mdx)("inlineCode",{parentName:"p"},"Notifir")," instance by providing the required details, such as ",(0,a.mdx)("inlineCode",{parentName:"p"},"baseUrl"),", ",(0,a.mdx)("inlineCode",{parentName:"p"},"apiPublicKey")," and ",(0,a.mdx)("inlineCode",{parentName:"p"},"apiSecretKey"),"."),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-java",parentName:"pre"},'Notifir auth = new Notifir(\n    "{YOUR_BASE_URL}", \n    "{YOUR_API_PUBLIC_KEY}", \n    "{YOUR_API_SECRET_KEY}"\n);\n')),(0,a.mdx)("p",null,"You can also customize API client using ",(0,a.mdx)("a",{href:"https://github.com/notifir/notifir-java/blob/main/src/main/java/notifir/http/HttpOptions.java",parentName:"p"},(0,a.mdx)("inlineCode",{parentName:"a"},"HttpOptions")),"\nsent as the 4th parameter."),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-java",parentName:"pre"},'HttpOptions httpOptions = new HttpOptions();\nhttpOptions.setConnectTimeout(30);\n\nNotifir auth = new Notifir(\n    "{YOUR_BASE_URL}", \n    "{YOUR_API_PUBLIC_KEY}", \n    "{YOUR_API_SECRET_KEY}",\n    httpOptions\n);\n')),(0,a.mdx)("h4",null,"Creating notifications"),(0,a.mdx)("p",null,"To create a ",(0,a.mdx)("a",{href:"https://notifir.github.io/docs/integration/api/data-model",parentName:"p"},"notification")," you can use the following function:\n",(0,a.mdx)("inlineCode",{parentName:"p"},"Request<NotificationResponse> createNotification(NotificationRequest notification)")),(0,a.mdx)("h5",null,"Example"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-java",parentName:"pre"},'Notifir notifir = new Notifir(\n  "https://localhost:3000/api", \n  "114ee1da-067b-11ed-be0f-6f24634ae754", \n  "114ee1da-067b-11ed-be0f-6f24634ae755"\n);\n\ntry {\n  NotificationRequest notification = NotificationRequest\n    .builder()\n    .type("test")\n    .projectId("default")\n    .userId("user@test.com")\n    .payload(new HashMap<>())\n    .build();\n\n  NotificationResponse result = notifir.createNotification(notification).execute();\n} catch (NotifirException e) {\n  //Something happened\n}\n')))}s.isMDXComponent=!0,n.default=s}},function(e){e.O(0,[511,774,888,179],(function(){return n=7758,e(e.s=n);var n}));var n=e.O();_N_E=n}]);