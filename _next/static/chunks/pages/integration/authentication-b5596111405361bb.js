(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{2468:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integration/authentication",function(){return n(1366)}])},7845:function(e,t,n){"use strict";var a=n(5893);t.Z={github:"https://github.com/notifir",docsRepositoryBase:"https://github.com/notifir/docs",titleSuffix:" \u2013 Notifir",logo:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mr-2 font-extrabold hidden md:inline",children:"Notifir"}),(0,a.jsx)("span",{className:"text-gray-600 font-normal hidden md:inline",children:"In-app notifications made easy"})]}),head:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("meta",{name:"msapplication-TileColor",content:"#ffffff"}),(0,a.jsx)("meta",{name:"theme-color",content:"#ffffff"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,a.jsx)("meta",{httpEquiv:"Content-Language",content:"en"}),(0,a.jsx)("meta",{name:"description",content:"Notifir: In-app notifications made easy"}),(0,a.jsx)("meta",{name:"og:description",content:"Notifir: In-app notifications made easy"}),(0,a.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,a.jsx)("meta",{name:"twitter:image",content:"https://notifir.github.io/docs/og.png"}),(0,a.jsx)("meta",{name:"twitter:site:domain",content:"https://notifir.github.io/docs"}),(0,a.jsx)("meta",{name:"twitter:url",content:"https://notifir.github.io/docs"}),(0,a.jsx)("meta",{name:"og:title",content:"Notifir: In-app notifications made easy"}),(0,a.jsx)("meta",{name:"og:image",content:"https://notifir.github.io/docs/og.png"}),(0,a.jsx)("meta",{name:"apple-mobile-web-app-title",content:"Notifir"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-icon-180x180.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"192x192",href:"/android-icon-192x192.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"96x96",href:"/favicon-96x96.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,a.jsx)("meta",{name:"msapplication-TileImage",content:"/ms-icon-144x144.png"})]}),search:!0,prevLinks:!0,nextLinks:!0,footer:!0,footerEditLink:"Edit this page on GitHub",footerText:(0,a.jsxs)(a.Fragment,{children:["MIT ",(new Date).getFullYear()," \xa9 Notifir"]}),unstable_faviconGlyph:"\ud83d\udd14"}},1366:function(e,t,n){"use strict";n.r(t);n(7294);var a=n(3905),i=n(7829),o=n.n(i),r=n(3805),s=n(7845),c=n(1127),m=n.n(c);function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var d=function(e){return(0,r.withSSG)(o()({filename:"authentication.mdx",route:"/integration/authentication",meta:{},pageMap:[{name:"advanced",children:[{name:"meta.json",meta:{}}],route:"/advanced"},{name:"get-started",route:"/get-started"},{name:"index",route:"/"},{name:"integration",children:[{name:"api",children:[{name:"creating-notifications",route:"/integration/api/creating-notifications"},{name:"data-model",route:"/integration/api/data-model"},{name:"meta.json",meta:{"data-model":"Data Model","creating-notifications":"Creating Notifications"}}],route:"/integration/api"},{name:"authentication",route:"/integration/authentication"},{name:"component",children:[{name:"customization",route:"/integration/component/customization"},{name:"installation",route:"/integration/component/installation"},{name:"meta.json",meta:{installation:"Installation",customization:"Customization"}}],route:"/integration/component"},{name:"meta.json",meta:{authentication:"Authentication",api:"API",component:"Web Component"}}],route:"/integration"},{name:"meta.json",meta:{index:"Introduction","get-started":"Get Started",integration:"Integration",component:"Web Component",advanced:"Advanced"}}]},s.Z))(e)};function p(e){var t=e.components,n=l(e,["components"]);return(0,a.mdx)(d,Object.assign({components:t},n),(0,a.mdx)("h1",null,"Authentication"),(0,a.mdx)("h2",null,"Arguments"),(0,a.mdx)("p",null,"When you integrate Notifir web component into your application (website), you need to pass ",(0,a.mdx)("inlineCode",{parentName:"p"},"apiKey"),", ",(0,a.mdx)("inlineCode",{parentName:"p"},"userId")," and ",(0,a.mdx)("inlineCode",{parentName:"p"},"userHmac"),". You pass both ",(0,a.mdx)("inlineCode",{parentName:"p"},"userId")," and ",(0,a.mdx)("inlineCode",{parentName:"p"},"userHmac")," to prove that you have an access. ",(0,a.mdx)("inlineCode",{parentName:"p"},"apiKey")," is passed to associate you with a project and verify the authentication using the project's ",(0,a.mdx)("inlineCode",{parentName:"p"},"apiSecretKey"),"."),(0,a.mdx)("table",null,(0,a.mdx)("thead",{parentName:"table"},(0,a.mdx)("tr",{parentName:"thead"},(0,a.mdx)("th",{align:"left",parentName:"tr"},"Argument"),(0,a.mdx)("th",{align:"left",parentName:"tr"},"Description"))),(0,a.mdx)("tbody",{parentName:"table"},(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{align:"left",parentName:"tr"},"apiPublicKey"),(0,a.mdx)("td",{align:"left",parentName:"tr"},"The public API key of your project, which is safe to store on the client-side and share over the network")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{align:"left",parentName:"tr"},"apiSecretKey"),(0,a.mdx)("td",{align:"left",parentName:"tr"},"The secret API key of your project, which is used in HMAC algorithm and should never be shared or exposed on the client-side")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{align:"left",parentName:"tr"},"userId"),(0,a.mdx)("td",{align:"left",parentName:"tr"},"The user id, which is usually email (but not required to be an email)")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{align:"left",parentName:"tr"},"userHmac"),(0,a.mdx)("td",{align:"left",parentName:"tr"},"The HMAC code of the user's id, which is generated on the backend using the ",(0,a.mdx)("inlineCode",{parentName:"td"},"apiSecretKey")," and used for authentication")))),(0,a.mdx)("p",null,"When you create a project you get both public and secret API keys automatically generated for you."),(0,a.mdx)("h2",null,"Algorithm"),(0,a.mdx)("p",null,"HMAC authentication algorithm is described on the diagram below."),(0,a.mdx)("img",{src:"/docs/02_hmac_concept.png"}),(0,a.mdx)("p",null,"When you initialize Notifir web component in your application, you provide your project's public API key and a user's ID (f.e. email). A savvy user can open their browser's developer console and obtain your project's public API key with this setup. They can then initialize the inbox with your public API key but with a different user id and start viewing that user's notifications. To prevent that, the HMAC authentication algorithm comes in play. It's not enough to have project's public key and user id to view user's notifications. You need to prove the access by providing the ",(0,a.mdx)("inlineCode",{parentName:"p"},"userHmac")," code. The only way to obtain that code is to execute the HMAC algorithm using both user id and project's secret API key. The same algorithm is executed on the Notifir's API and can guarantee that the user is authorized to see notifications."),(0,a.mdx)(m(),{emoji:"\ud83d\udd11",mdxType:"Callout"},(0,a.mdx)("p",{parentName:"Callout"},"Remember that this authentication mechanism is secure as long as your secret API key is kept safe. Never publish it anywhere or expose it on the client-side code!")),"\n",(0,a.mdx)(m(),{mdxType:"Callout"},(0,a.mdx)("p",{parentName:"Callout"},"When using user id in the web component, it MUST be lowercase.")),(0,a.mdx)("h2",null,"HMAC"),(0,a.mdx)("p",null,"Use your project's API secret to compute an HMAC code of the user's id on your server. Do not perform the calculation of the HMAC in the client."),(0,a.mdx)("h3",null,"NodeJS"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-js",parentName:"pre"},"const userHmac = crypto\n  .createHmac('sha256', NOTIFIR_API_SECRET)\n  .update(userId)\n  .digest('base64');\n")),(0,a.mdx)("h3",null,"Java"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-java",parentName:"pre"},'import javax.crypto.spec.SecretKeySpec;\nimport javax.crypto.Mac;\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Base64;\n\nclass NotifirAuth {\n  private static final String HMAC_SHA256 = "HmacSHA256";\n\n  public static String calculateHMAC(String data, String key) throws InvalidKeyException, NoSuchAlgorithmException {\n    SecretKeySpec secretKeySpec = new SecretKeySpec(key.getBytes(), HMAC_SHA256);\n    Mac mac = Mac.getInstance(HMAC_SHA256);\n    mac.init(secretKeySpec);\n    return encodeToBase64(mac.doFinal(data.getBytes()));\n  }\n\n  private static String encodeToBase64(byte[] bytes) {\n    return Base64.getEncoder().encodeToString(bytes);\n  }\n}\n\nclass Main {\n  public static void main(String[] args) throws InvalidKeyException, NoSuchAlgorithmException {\n    String hmac = NotifirAuth.calculateHMAC("user@example.com", "NOTIFIR_API_SECRET");\n    System.out.println(hmac);\n  }\n}\n')),(0,a.mdx)("h3",null,"Ruby"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-rb",parentName:"pre"},"digest = OpenSSL::Digest::Digest.new('sha256')\nuser_hmac = Base64.encode64(OpenSSL::HMAC.digest(digest, NOTIFIR_API_SECRET, user_id))\n")),(0,a.mdx)("h2",null,"Usage"),(0,a.mdx)("p",null,"To start using it on the client, provide the HMAC code in the userHmac property of web component. You still need to set your public API key and the user's id in addition to that."),(0,a.mdx)("pre",null,(0,a.mdx)("code",{className:"language-html",parentName:"pre"},'\n<notification-bell \n  apiUrl="http://localhost:3001/api/graphql"\n  apiKey="YOUR_API_PUBLIC_KEY"\n  userId="user@example.com"\n  userHmac="YOUR_USER_HMAC_FROM_PREVIOUS_STEP"\n  >\n</notification-bell>\n')))}p.isMDXComponent=!0,t.default=p},1127:function(e,t,n){e.exports=n(3952)},3952:function(e,t,n){var a,i=(a=n(7294))&&"object"===typeof a&&"default"in a?a.default:a;const o={default:"bg-orange-100 text-orange-800 dark:text-orange-300 dark:bg-orange-200 dark:bg-opacity-10",error:"bg-red-200 text-red-900 dark:text-red-200 dark:bg-red-600 dark:bg-opacity-30",warning:"bg-yellow-200 text-yellow-900 dark:text-yellow-200 dark:bg-yellow-700 dark:bg-opacity-30"};e.exports=({children:e,type:t="default",emoji:n="\ud83d\udca1"})=>i.createElement("div",{className:`${o[t]} flex rounded-lg callout mt-6`},i.createElement("div",{className:"pl-3 pr-2 py-2 select-none text-xl",style:{fontFamily:'"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'}},n),i.createElement("div",{className:"pr-4 py-2"},e))}},function(e){e.O(0,[511,774,888,179],(function(){return t=2468,e(e.s=t);var t}));var t=e.O();_N_E=t}]);